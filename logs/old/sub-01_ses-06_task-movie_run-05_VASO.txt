Running spm_bias_field_correction on /data/kleinrl/data/DSST/openneuro/ds003216/derivatives/sub-01/VASO_func/sub-01_ses-06_task-movie_run-05_VASO.nii
spm_dir (path file):  
input vol:            /data/kleinrl/data/DSST/openneuro/ds003216/derivatives/sub-01/VASO_func/sub-01_ses-06_task-movie_run-05_VASO.nii
dir_name:             /data/kleinrl/data/DSST/openneuro/ds003216/derivatives/sub-01/VASO_func
base_name:            sub-01_ses-06_task-movie_run-05_VASO
working dir:          /data/kleinrl/data/DSST/openneuro/ds003216/derivatives/sub-01/VASO_func/sub-01_ses-06_task-movie_run-05_VASO_working_bias
saving file as:       /data/kleinrl/data/DSST/openneuro/ds003216/derivatives/sub-01/VASO_func/sub-01_ses-06_task-movie_run-05_VASO.bias.nii
creating working dir
Directory /path/to/dir exists.
rm -rf directory
***********************************************************************************   
*                                                                                 *   
   WARNING: Job number 22976967 is attempting to utilize MATLAB licenses.        
*  MATLAB licenses should only be used in                                         *   
*  interactive sessions on Biowulf (i.e. after using the 'sinteractive' command). *   
*  To run MATLAB code in a non-interactive session, it should first be compiled.  *   
*  This will allow the code to run without utilyzing matlab licenses.  MATLAB     *   
*  code can be compiled using the mcc2 function like so:                          *   
*                                                                                 *   
*  >> mcc2 -m myfunction.m                                                        *   
*                                                                                 *   
*  It is additionally suggested that mcc2 be called with the -singleCompThread    *   
*  runtime flag like so:                                                          *   
*                                                                                 *   
*  >> mcc2 -m -R -singleCompThread myfunction.m                                   *   
*                                                                                 *   
*  For more information about compiling MATLAB code, see the website below, or    *   
*  contact the biowulf staff.  staff@helix.nih.gov                                *   
*                                                                                 *   
*  https://hpc.nih.gov/apps/Matlab_compiler.html                                  *   
*                                                                                 *   
***********************************************************************************   
++ 3dcalc: AFNI version=AFNI_21.2.06 (Sep  1 2021) [64-bit]
++ Authored by: A cast of thousands
[7m** FATAL ERROR:[0m can't open dataset muncorr.nii
** Program compile date = Sep  1 2021
copying /data/kleinrl/data/DSST/openneuro/ds003216/derivatives/sub-01/VASO_func/sub-01_ses-06_task-movie_run-05_VASO_working_bias/muncorr.nii to /data/kleinrl/data/DSST/openneuro/ds003216/derivatives/sub-01/VASO_func/sub-01_ses-06_task-movie_run-05_VASO.bias.nii
cp: cannot stat â€˜muncorr.niiâ€™: No such file or directory
mkdir: cannot create directory â€˜/data/kleinrl/data/DSST/openneuro/ds003216/derivatives/sub-01/VASO_func/sub-01_ses-06_task-movie_run-05_VASO_working_ANTsâ€™: File exists
RUNNING: run_ANTS this will calculate the xfm from ANAT to EPI_mean and
and apply the xfm producing warped_MP2RAGE.nii
'warp_ANTS_resampleNN.sh <input_nii> <master_file>' will 
apply this xfm using nearestneighbor so only use with parcs
/data/kleinrl/data/DSST/openneuro/ds003216/derivatives/sub-01/VASO_func/sub-01_ses-06_task-movie_run-05_VASO_working_bias/muncorr.nii
/data/kleinrl/data/DSST/openneuro/ds003216/sub-01/ses-01/anat/sub-01_ses-01_run-01_T1w.bias.nii
EPI_mean:             /data/kleinrl/data/DSST/openneuro/ds003216/derivatives/sub-01/VASO_func/sub-01_ses-06_task-movie_run-05_VASO_working_bias/muncorr.nii
ANAT:                 /data/kleinrl/data/DSST/openneuro/ds003216/sub-01/ses-01/anat/sub-01_ses-01_run-01_T1w.bias.nii
dir_name:             /data/kleinrl/data/DSST/openneuro/ds003216/derivatives/sub-01/VASO_func/sub-01_ses-06_task-movie_run-05_VASO_working_bias
base_name:            muncorr.nii
working dir:          /data/kleinrl/data/DSST/openneuro/ds003216/derivatives/sub-01/VASO_func/sub-01_ses-06_task-movie_run-05_VASO_working_ANTs
creating working dir
cp: cannot stat â€˜/data/kleinrl/data/DSST/openneuro/ds003216/derivatives/sub-01/VASO_func/sub-01_ses-06_task-movie_run-05_VASO_working_bias/muncorr.niiâ€™: No such file or directory
I expect 2 files. the T1_weighted EPI.nii and a MP2RAGE_orig.nii (renzo)
we are using the T1_weighted EPI_bias corrected and MP2RAGE bias corrected
++ 3dcalc: AFNI version=AFNI_21.2.06 (Sep  1 2021) [64-bit]
++ Authored by: A cast of thousands
++ Output dataset ./MP2RAGE.nii
*****************************************
************* starting with ANTS ********
*****************************************
All_Command_lines_OK
Using single precision for computations.
=============================================================================
The composite transform comprises the following transforms (in order): 
  1. initial_matrix.txt (type = MatrixOffsetTransformBase)
=============================================================================
  number of levels = 2
  number of levels = 2
  number of levels = 2
  fixed image: EPI.nii
  moving image: MP2RAGE.nii
  fixed image: EPI.nii
  moving image: MP2RAGE.nii
  fixed image: EPI.nii
  moving image: MP2RAGE.nii
Dimension = 3
Number of stages = 3
Use Histogram Matching false
Winsorize image intensities true
Lower quantile = 0.005
Upper quantile = 0.995
Stage 1 State
   Image metric = CC
     Fixed image = Image (0x2df9380)
  RTTI typeinfo:   itk::Image<float, 3u>
  Reference Count: 2
  Modified Time: 1288
  Debug: Off
  Object Name: 
  Observers: 
    none
  Source: (none)
  Source output name: (none)
  Release Data: Off
  Data Released: False
  Global Release Data: Off
  PipelineMTime: 0
  UpdateMTime: 1071
  RealTimeStamp: 0 seconds 
  LargestPossibleRegion: 
    Dimension: 3
    Index: [0, 0, 0]
    Size: [162, 216, 120]
  BufferedRegion: 
    Dimension: 3
    Index: [0, 0, 0]
    Size: [162, 216, 120]
  RequestedRegion: 
    Dimension: 3
    Index: [0, 0, 0]
    Size: [162, 216, 120]
  Spacing: [0.802469, 0.802469, 0.8]
  Origin: [-64.0361, 62.2044, -29.4552]
  Direction: 
1 0 0
0 -1 0
0 0 1

  IndexToPointMatrix: 
0.802469 0 0
0 -0.802469 0
0 0 0.8

  PointToIndexMatrix: 
1.24615 0 0
0 -1.24615 0
0 0 1.25

  Inverse Direction: 
1 0 0
0 -1 0
0 0 1

  PixelContainer: 
    ImportImageContainer (0x2ded8e0)
      RTTI typeinfo:   itk::ImportImageContainer<unsigned long, float>
      Reference Count: 1
      Modified Time: 1068
      Debug: Off
      Object Name: 
      Observers: 
        none
      Pointer: 0x2aaab4fad010
      Container manages memory: true
      Size: 4199040
      Capacity: 4199040

     Moving image = Image (0x2e00650)
  RTTI typeinfo:   itk::Image<float, 3u>
  Reference Count: 2
  Modified Time: 1289
  Debug: Off
  Object Name: 
  Observers: 
    none
  Source: (none)
  Source output name: (none)
  Release Data: Off
  Data Released: False
  Global Release Data: Off
  PipelineMTime: 0
  UpdateMTime: 1286
  RealTimeStamp: 0 seconds 
  LargestPossibleRegion: 
    Dimension: 3
    Index: [0, 0, 0]
    Size: [320, 320, 240]
  BufferedRegion: 
    Dimension: 3
    Index: [0, 0, 0]
    Size: [320, 320, 240]
  RequestedRegion: 
    Dimension: 3
    Index: [0, 0, 0]
    Size: [320, 320, 240]
  Spacing: [0.65, 0.65, 0.65]
  Origin: [77.6828, -138.321, -102.731]
  Direction: 
-0 0 -1
1 -0 0
0 1 -0

  IndexToPointMatrix: 
0 0 -0.65
0.65 0 0
0 0.65 0

  PointToIndexMatrix: 
0 1.53846 0
0 0 1.53846
-1.53846 0 0

  Inverse Direction: 
0 1 0
0 0 1
-1 0 0

  PixelContainer: 
    ImportImageContainer (0x2e00910)
      RTTI typeinfo:   itk::ImportImageContainer<unsigned long, float>
      Reference Count: 1
      Modified Time: 1283
      Debug: Off
      Object Name: 
      Observers: 
        none
      Pointer: 0x2aaab5fb2010
      Container manages memory: true
      Size: 24576000
      Capacity: 24576000

     Weighting = 0.7
     Sampling strategy = regular
     Number of bins = 32
     Radius = 32
     Sampling percentage  = 0.1
   Transform = Rigid
     Gradient step = 0.05
     Update field sigma (voxel space) = 0
     Total field sigma (voxel space) = 0
     Update field time sigma = 0
     Total field time sigma  = 0
     Number of time indices = 0
     Number of time point samples = 0
Stage 2 State
   Image metric = Mattes
     Fixed image = Image (0x2e01650)
  RTTI typeinfo:   itk::Image<float, 3u>
  Reference Count: 2
  Modified Time: 1720
  Debug: Off
  Object Name: 
  Observers: 
    none
  Source: (none)
  Source output name: (none)
  Release Data: Off
  Data Released: False
  Global Release Data: Off
  PipelineMTime: 0
  UpdateMTime: 1503
  RealTimeStamp: 0 seconds 
  LargestPossibleRegion: 
    Dimension: 3
    Index: [0, 0, 0]
    Size: [162, 216, 120]
  BufferedRegion: 
    Dimension: 3
    Index: [0, 0, 0]
    Size: [162, 216, 120]
  RequestedRegion: 
    Dimension: 3
    Index: [0, 0, 0]
    Size: [162, 216, 120]
  Spacing: [0.802469, 0.802469, 0.8]
  Origin: [-64.0361, 62.2044, -29.4552]
  Direction: 
1 0 0
0 -1 0
0 0 1

  IndexToPointMatrix: 
0.802469 0 0
0 -0.802469 0
0 0 0.8

  PointToIndexMatrix: 
1.24615 0 0
0 -1.24615 0
0 0 1.25

  Inverse Direction: 
1 0 0
0 -1 0
0 0 1

  PixelContainer: 
    ImportImageContainer (0x2e01940)
      RTTI typeinfo:   itk::ImportImageContainer<unsigned long, float>
      Reference Count: 1
      Modified Time: 1500
      Debug: Off
      Object Name: 
      Observers: 
        none
      Pointer: 0x2e069d0
      Container manages memory: true
      Size: 4199040
      Capacity: 4199040

     Moving image = Image (0x2dfd1d0)
  RTTI typeinfo:   itk::Image<float, 3u>
  Reference Count: 2
  Modified Time: 1721
  Debug: Off
  Object Name: 
  Observers: 
    none
  Source: (none)
  Source output name: (none)
  Release Data: Off
  Data Released: False
  Global Release Data: Off
  PipelineMTime: 0
  UpdateMTime: 1718
  RealTimeStamp: 0 seconds 
  LargestPossibleRegion: 
    Dimension: 3
    Index: [0, 0, 0]
    Size: [320, 320, 240]
  BufferedRegion: 
    Dimension: 3
    Index: [0, 0, 0]
    Size: [320, 320, 240]
  RequestedRegion: 
    Dimension: 3
    Index: [0, 0, 0]
    Size: [320, 320, 240]
  Spacing: [0.65, 0.65, 0.65]
  Origin: [77.6828, -138.321, -102.731]
  Direction: 
-0 0 -1
1 -0 0
0 1 -0

  IndexToPointMatrix: 
0 0 -0.65
0.65 0 0
0 0.65 0

  PointToIndexMatrix: 
0 1.53846 0
0 0 1.53846
-1.53846 0 0

  Inverse Direction: 
0 1 0
0 0 1
-1 0 0

  PixelContainer: 
    ImportImageContainer (0x2e063d0)
      RTTI typeinfo:   itk::ImportImageContainer<unsigned long, float>
      Reference Count: 1
      Modified Time: 1715
      Debug: Off
      Object Name: 
      Observers: 
        none
      Pointer: 0x2aaabbd73010
      Container manages memory: true
      Size: 24576000
      Capacity: 24576000

     Weighting = 0.7
     Sampling strategy = regular
     Number of bins = 32
     Radius = 4
     Sampling percentage  = 0.1
   Transform = Affine
     Gradient step = 0.1
     Update field sigma (voxel space) = 0
     Total field sigma (voxel space) = 0
     Update field time sigma = 0
     Total field time sigma  = 0
     Number of time indices = 0
     Number of time point samples = 0
Stage 3 State
   Image metric = CC
     Fixed image = Image (0x2dfd4c0)
  RTTI typeinfo:   itk::Image<float, 3u>
  Reference Count: 2
  Modified Time: 2152
  Debug: Off
  Object Name: 
  Observers: 
    none
  Source: (none)
  Source output name: (none)
  Release Data: Off
  Data Released: False
  Global Release Data: Off
  PipelineMTime: 0
  UpdateMTime: 1935
  RealTimeStamp: 0 seconds 
  LargestPossibleRegion: 
    Dimension: 3
    Index: [0, 0, 0]
    Size: [162, 216, 120]
  BufferedRegion: 
    Dimension: 3
    Index: [0, 0, 0]
    Size: [162, 216, 120]
  RequestedRegion: 
    Dimension: 3
    Index: [0, 0, 0]
    Size: [162, 216, 120]
  Spacing: [0.802469, 0.802469, 0.8]
  Origin: [-64.0361, 62.2044, -29.4552]
  Direction: 
1 0 0
0 -1 0
0 0 1

  IndexToPointMatrix: 
0.802469 0 0
0 -0.802469 0
0 0 0.8

  PointToIndexMatrix: 
1.24615 0 0
0 -1.24615 0
0 0 1.25

  Inverse Direction: 
1 0 0
0 -1 0
0 0 1

  PixelContainer: 
    ImportImageContainer (0x2dfad90)
      RTTI typeinfo:   itk::ImportImageContainer<unsigned long, float>
      Reference Count: 1
      Modified Time: 1932
      Debug: Off
      Object Name: 
      Observers: 
        none
      Pointer: 0x3e0f7d0
      Container manages memory: true
      Size: 4199040
      Capacity: 4199040

     Moving image = Image (0x3e0c580)
  RTTI typeinfo:   itk::Image<float, 3u>
  Reference Count: 2
  Modified Time: 2153
  Debug: Off
  Object Name: 
  Observers: 
    none
  Source: (none)
  Source output name: (none)
  Release Data: Off
  Data Released: False
  Global Release Data: Off
  PipelineMTime: 0
  UpdateMTime: 2150
  RealTimeStamp: 0 seconds 
  LargestPossibleRegion: 
    Dimension: 3
    Index: [0, 0, 0]
    Size: [320, 320, 240]
  BufferedRegion: 
    Dimension: 3
    Index: [0, 0, 0]
    Size: [320, 320, 240]
  RequestedRegion: 
    Dimension: 3
    Index: [0, 0, 0]
    Size: [320, 320, 240]
  Spacing: [0.65, 0.65, 0.65]
  Origin: [77.6828, -138.321, -102.731]
  Direction: 
-0 0 -1
1 -0 0
0 1 -0

  IndexToPointMatrix: 
0 0 -0.65
0.65 0 0
0 0.65 0

  PointToIndexMatrix: 
0 1.53846 0
0 0 1.53846
-1.53846 0 0

  Inverse Direction: 
0 1 0
0 0 1
-1 0 0

  PixelContainer: 
    ImportImageContainer (0x3e0c870)
      RTTI typeinfo:   itk::ImportImageContainer<unsigned long, float>
      Reference Count: 1
      Modified Time: 2147
      Debug: Off
      Object Name: 
      Observers: 
        none
      Pointer: 0x2aaac1b34010
      Container manages memory: true
      Size: 24576000
      Capacity: 24576000

     Weighting = 1
     Sampling strategy = none
     Number of bins = 32
     Radius = 2
     Sampling percentage  = 1
   Transform = SyN
     Gradient step = 0.1
     Update field sigma (voxel space) = 2
     Total field sigma (voxel space) = 0
     Update field time sigma = 0
     Total field time sigma  = 0
     Number of time indices = 0
     Number of time point samples = 0
Registration using 3 total stages.

Stage 0
  iterations = 1000x500
  convergence threshold = 1e-06
  convergence window size = 10
  number of levels = 2
  using the CC metric (radius = 32, weight = 0.7)
  preprocessing:  winsorizing the image intensities
  Shrink factors (level 1 out of 2): [2, 2, 2]
  Shrink factors (level 2 out of 2): [1, 1, 1]
  smoothing sigmas per level: [1, 0]
  regular sampling (percentage = 0.1)

*** Running Euler3DTransform registration ***

DIAGNOSTIC,Iteration,metricValue,convergenceValue,ITERATION_TIME_INDEX,SINCE_LAST
 2DIAGNOSTIC,     1, -3.369928523898e-02, inf, 3.1574e+03, 3.1574e+03, 
 2DIAGNOSTIC,     2, -3.369928523898e-02, inf, 6.3613e+03, 3.2040e+03, 
 2DIAGNOSTIC,     3, -3.369928523898e-02, inf, 9.6273e+03, 3.2660e+03, 
 2DIAGNOSTIC,     4, -3.369928523898e-02, inf, 1.2885e+04, 3.2573e+03, 
 2DIAGNOSTIC,     5, -3.369928523898e-02, inf, 1.6087e+04, 3.2027e+03, 
 2DIAGNOSTIC,     6, -3.369928523898e-02, inf, 1.9353e+04, 3.2657e+03, 
 2DIAGNOSTIC,     7, -3.369928523898e-02, inf, 2.2574e+04, 3.2209e+03, 
 2DIAGNOSTIC,     8, -3.369928523898e-02, inf, 2.5656e+04, 3.0827e+03, 
 2DIAGNOSTIC,     9, -3.369928523898e-02, inf, 2.8658e+04, 3.0011e+03, 
slurmstepd: error: *** JOB 22976967 ON cn1084 CANCELLED AT 2021-09-15T20:11:12 ***
